System.register("chunks:///_virtual/Floor.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,e,r,i,n,l,a,p,c,s,u;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,r=o.createClass,i=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){l=o.cclegacy,a=o.Node,p=o.Color,c=o.Sprite,s=o._decorator,u=o.Component}],execute:function(){var d,y,f,h,b,g,C,F,m,v,S;o("FloorType",void 0),l._RF.push({},"1ae8b9sg4BA6qDrcmLE/CZI","Floor",void 0);var z,T=s,w=T.ccclass,_=T.property;!function(o){o[o.Trap=0]="Trap",o[o.Stone=1]="Stone"}(z||(z=o("FloorType",{})));o("Floor",(d=w("Floor"),y=_({type:a,tooltip:"終點"}),f=_({type:p,tooltip:"陷阱方塊顏色"}),h=_({type:p,tooltip:"道路顏色"}),b=_({type:c,tooltip:"Floor root node sprite component"}),d((F=t((C=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return t=o.call.apply(o,[this].concat(r))||this,i(t,"endNode",F,n(t)),i(t,"trapColor",m,n(t)),i(t,"roadColor",v,n(t)),i(t,"rootSprite",S,n(t)),t.end=!1,t.trap=!1,t}return e(t,o),r(t,[{key:"isEnd",get:function(){return this.end},set:function(o){this.end=o,this.endNode.active=1==o}},{key:"isTrap",get:function(){return this.trap},set:function(o){this.trap=o,this.rootSprite.color=o?this.trapColor:this.roadColor}}]),t}(u)).prototype,"endNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(C.prototype,"trapColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(C.prototype,"roadColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(C.prototype,"rootSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=C))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Jumper.ts"],(function(t){"use strict";var i,e,o,n,r,s,u,l,a,p,c,h,d,y,m,S,v,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.createClass,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,l=t.UITransform,a=t.ProgressBar,p=t.Color,c=t.Sprite,h=t.AudioClip,d=t.AudioSource,y=t.tween,m=t.Vec3,S=t.v3,v=t.Component},function(t){b=t.Jumper}],execute:function(){var f,g,P,C,M,w,B,z,I,A,T,j,E,H,k,J,_,D,R;t("MoveState",void 0),s._RF.push({},"84757L2fUlKjb0veO4Q3pSa","Player",void 0);var U,G=u.ccclass,L=u.property;!function(t){t[t.Idle=0]="Idle",t[t.Moving=1]="Moving",t[t.End=2]="End"}(U||(U=t("MoveState",{})));t("Player",(f=G("player"),g=L({type:b,tooltip:"Player Body"}),P=L({type:l,tooltip:"body"}),C=L({type:a,tooltip:"HP Bar"}),M=L({type:p,tooltip:"Hit Color"}),w=L({type:c,tooltip:"Body Sprite"}),B=L({type:h,tooltip:"Running sound"}),z=L({type:h,tooltip:"Hit sound"}),I=L({type:d,tooltip:"player audio source"}),f((j=i((T=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"jumper",j,r(i)),n(i,"body",E,r(i)),n(i,"hpBar",H,r(i)),n(i,"hitColor",k,r(i)),n(i,"bodySprite",J,r(i)),n(i,"runningAudioClip",_,r(i)),n(i,"hitAudioClip",D,r(i)),n(i,"audioSource",R,r(i)),i.moveTime=.5,i.step=0,i.currentTime=0,i.speed=0,i.currentPosition=new m(0,0,0),i.deltaPosition=new m(0,0,0),i.targetPosition=new m(0,0,0),i.moveState=U.Idle,i.originalColor=null,i}e(i,t);var s=i.prototype;return s.start=function(){this.originalColor=this.bodySprite.color.clone()},s.onHit=function(t){var i=this,e=.01*t*.05;this.hpBar.progress-=e,y(this.bodySprite).to(.5,{color:this.hitColor}).call((function(){i.bodySprite.color=i.originalColor})).start(),this.audioSource.playOneShot(this.hitAudioClip)},s.onGameInit=function(){this.node.setPosition(m.ZERO),this.hpBar.progress=1},s.onGameStart=function(){this.moveState=U.Idle},s.onGameEnd=function(){this.moveState=U.End,this.stopMoveSound()},s.update=function(t){this.moveState==U.Moving&&(this.currentTime+=t,this.isMoveEnd()?(this.moveState=U.Idle,this.moveByStep(this.step)):(this.node.getPosition(this.currentPosition),this.deltaPosition=S(this.speed*t,0,0),m.add(this.currentPosition,this.currentPosition,this.deltaPosition),this.node.setPosition(this.currentPosition))),this.jumper.onUpdate(t)},s.onMouseUp=function(){this.moveState=U.End,this.stopMoveSound(),this.jumper.jumpByStep(1.5)},s.onMouseDown=function(){this.moveState=U.Idle,this.moveByStep(1.5)},s.moveByStep=function(t){this.moveState==U.Idle&&1!=this.jumper.IsJump&&(this.moveState=U.Moving,this.step=t,this.currentTime=0,this.speed=t*this.body.contentSize.width*1.2/this.moveTime,this.playMoveSound(),m.add(this.targetPosition,this.node.getPosition(this.currentPosition),S(t*this.body.contentSize.width,0,0)))},s.playMoveSound=function(){this.audioSource.playing||(this.audioSource.clip!=this.runningAudioClip?this.audioSource.clip=this.runningAudioClip:this.audioSource.currentTime=0,this.audioSource.play())},s.stopMoveSound=function(){this.audioSource.stop()},s.isMoveEnd=function(){return this.currentTime>this.moveTime},o(i,[{key:"HP",get:function(){return this.hpBar.progress}},{key:"MoveState",get:function(){return this.moveState}},{key:"IsJump",get:function(){return this.jumper.IsJump}},{key:"BodySize",get:function(){return this.body.contentSize}}]),i}(v)).prototype,"jumper",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(T.prototype,"body",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(T.prototype,"hpBar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(T.prototype,"hitColor",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(T.prototype,"bodySprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(T.prototype,"runningAudioClip",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(T.prototype,"hitAudioClip",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(T.prototype,"audioSource",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=T))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"95ca9OSxTJFOpCT5vvY6HMu","Define",void 0);e("STRING",{GAME_START:"Let Go !!!",GAME_OVER:"Game Over !!!",WIN:"You Win !!!"});t._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SoundButton.ts"],(function(t){"use strict";var n,e,o,u,r,i,a,c,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,u=t.assertThisInitialized},function(t){r=t.cclegacy,i=t._decorator,a=t.Button,c=t.Component},function(t){l=t.SoundButton}],execute:function(){var s,p,f,y,v;r._RF.push({},"b5f7cKSYUtAuLv7f7IXsxOe","Menu",void 0);var B=i,g=B.ccclass,m=B.property;t("Menu",(s=g("Menu"),p=m({type:l,tooltip:"Game Play Button"}),s((v=n((y=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=t.call.apply(t,[this].concat(r))||this,o(n,"gamePlayButton",v,u(n)),n.gameButtonEvent=null,n}e(n,t);var r=n.prototype;return r.setGamePlayButtonEvent=function(t){this.gameButtonEvent=t},r.start=function(){var t=this;this.gamePlayButton.node.on(a.EventType.CLICK,(function(){t.gameButtonEvent&&t.gameButtonEvent()}))},n}(c)).prototype,"gamePlayButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Jumper.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,u,a,p,s,l,m,c,d,h,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.createClass,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){u=t.cclegacy,a=t.UITransform,p=t.Animation,s=t.AudioClip,l=t._decorator,m=t.AnimationClip,c=t.v3,d=t.Vec3,h=t.AudioSource,y=t.Component}],execute:function(){var S,f,g,j,b,J,v,I,P;t("JumpState",void 0),u._RF.push({},"bde62is0kxJnqCeijAg0gRl","Jumper",void 0);var w,A=l,C=A.ccclass,T=A.property;!function(t){t[t.Idle=0]="Idle",t[t.Jumping=1]="Jumping"}(w||(w=t("JumpState",{})));var z="pre_jump",_="jump";t("Jumper",(S=C("Jumper"),f=T({type:a,tooltip:"jumper body"}),g=T({type:p,tooltip:"animation"}),j=T({type:s,tooltip:"Jump audio clip"}),S((v=i((J=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i=t.call.apply(t,[this].concat(n))||this,o(i,"body",v,r(i)),o(i,"animation",I,r(i)),o(i,"jumpAudioClip",P,r(i)),i.jumpState=w.Idle,i.jumpStep=0,i.jumpTime=.1,i.currentPosition=new d(0,0,0),i.deltaPosition=new d(0,0,0),i.audioSource=new h,i}e(i,t);var u=i.prototype;return u.jumpByStep=function(t){var i=this;1!=this.IsJump&&(this.animation.play(z),this.animation.once(p.EventType.FINISHED,(function(){i.State=w.Jumping,i.jumpStep=t,i.jumpTime=i.animation.getState(_).duration,i.animation.play(_),i.audioSource.playOneShot(i.jumpAudioClip),i.animation.once(p.EventType.FINISHED,(function(){i.State=w.Idle,i.animation.getState(z).wrapMode=m.WrapMode.Reverse,i.animation.play(z)}))})))},u.onUpdate=function(t){1==this.IsJump&&(this.node.parent.getPosition(this.currentPosition),this.deltaPosition=c(this.Speed*t,0,0),d.add(this.currentPosition,this.currentPosition,this.deltaPosition),this.node.parent.setPosition(this.currentPosition))},n(i,[{key:"IsJump",get:function(){return this.jumpState==w.Jumping}},{key:"State",set:function(t){this.jumpState=t}},{key:"Speed",get:function(){return this.jumpStep*this.body.contentSize.width/this.jumpTime}}]),i}(y)).prototype,"body",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(J.prototype,"animation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(J.prototype,"jumpAudioClip",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=J))||b));u._RF.pop()}}}));

System.register("chunks:///_virtual/AudioComp.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,e,r,s,u,a,c,o;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){u=i.cclegacy,a=i.AudioClip,c=i._decorator,o=i.AudioSource}],execute:function(){var n,l,p,y,m,M,h,g,b,f,d;u._RF.push({},"d64cc1CCqRKCIbHwgTGehoR","AudioComp",void 0);var v=c,w=v.property,C=v.ccclass;i("AudioComp",(n=C("AudioComp"),l=w({type:a,tooltip:"background music"}),p=w({type:a,tooltip:"start game music"}),y=w({type:a,tooltip:"game over music"}),m=w({type:a,tooltip:"winner music"}),n((g=t((h=function(i){function t(){for(var t,e=arguments.length,u=new Array(e),a=0;a<e;a++)u[a]=arguments[a];return t=i.call.apply(i,[this].concat(u))||this,r(t,"bgMusics",g,s(t)),r(t,"startGameMusic",b,s(t)),r(t,"gameOverMusic",f,s(t)),r(t,"winnerMusic",d,s(t)),t}e(t,i);var u=t.prototype;return u.playBgMusic=function(){this.playMusic(this.bgMusics)},u.playGameStartMusic=function(){this.playMusic(this.startGameMusic)},u.playGameOverMusic=function(){this.playMusic(this.gameOverMusic)},u.playGameWinnerMusic=function(){this.playMusic(this.winnerMusic)},u.playMusic=function(i){this.playing&&this.stop(),this.clip!=i&&(this.clip=i),this.play()},t}(o)).prototype,"bgMusics",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(h.prototype,"startGameMusic",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(h.prototype,"gameOverMusic",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(h.prototype,"winnerMusic",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=h))||M));u._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"d860d1tN55LpJ4JUsXplNbc","StateMachine",void 0);t("default",function(){function t(t){this.transitTime=0,this.transit=!0,this.force=!1,this.enter=!1,this.currentState=t,this.nextState=t}var i=t.prototype;return i.Trigger=function(){this.transit?(this.currentState=this.nextState,this.transitTime=(new Date).getTime()/1e3,this.transit=!this.transit,this.force=!1,this.enter=!0):this.enter=!1},i.ForceTransit=function(t){this.nextState=t,this.transit=!0,this.force=!0},e(t,[{key:"NextState",set:function(t){1!=this.force&&(this.nextState=t,this.transit=!0)}},{key:"Current",get:function(){return this.currentState}},{key:"Elapsed",get:function(){return(new Date).getTime()/1e3-this.transitTime}},{key:"isEnter",get:function(){return this.enter}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SoundButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,u,r,c,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){u=t.cclegacy,r=t.AudioClip,c=t._decorator,a=t.Button,s=t.AudioSource}],execute:function(){var l,p,f,d,y;u._RF.push({},"e60d9bUnalLV5F19LRSbnsn","SoundButton",void 0);var h=c,S=h.ccclass,v=h.property;t("SoundButton",(l=S("SoundButton"),p=v({type:r,tooltip:"Button effect sound"}),l((y=e((d=function(t){function e(){for(var e,o=arguments.length,u=new Array(o),r=0;r<o;r++)u[r]=arguments[r];return e=t.call.apply(t,[this].concat(u))||this,i(e,"effectAudio",y,n(e)),e.audioSource=new s,e}o(e,t);var u=e.prototype;return u.start=function(){var t=this;this.node.on(a.EventType.CLICK,(function(){t.playEffectMusic()}))},u.playEffectMusic=function(){this.audioSource.playing&&this.audioSource.stop(),this.audioSource.playOneShot(this.effectAudio)},e}(a)).prototype,"effectAudio",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=d))||f));u._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Floor.ts","./Player.ts","./Define.ts","./Menu.ts","./AudioComp.ts","./StateMachine.ts"],(function(e){"use strict";var t,i,n,o,a,r,l,s,c,u,p,h,m,d,g,y,f,b,P,M,S,v,E,T,w,C,G,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e.Prefab,l=e.CCInteger,s=e.Animation,c=e.Node,u=e.UIOpacity,p=e.Label,h=e.Camera,m=e.UITransform,d=e._decorator,g=e.size,y=e.view,f=e.tween,b=e.Vec3,P=e.instantiate,M=e.Component},function(e){S=e.FloorType,v=e.Floor},function(e){E=e.Player,T=e.MoveState},function(e){w=e.STRING},function(e){C=e.Menu},function(e){G=e.AudioComp},function(e){I=e.default}],execute:function(){var N,L,O,k,z,F,A,x,W,H,_,D,R,B,U,J,j,V,Z,K,q,Q,X,Y,$,ee,te;a._RF.push({},"effeeNHyJZKLZwMwkeAf+c5","GameMgr",void 0);var ie,ne=d,oe=ne.ccclass,ae=ne.property;!function(e){e[e.Idle=0]="Idle",e[e.Init=1]="Init",e[e.Play=2]="Play",e[e.Playing=3]="Playing",e[e.End=4]="End"}(ie||(ie={}));var re="gameStart";e("GameMgr",(N=oe("GameMgr"),L=ae({type:r,tooltip:"地板Prefab"}),O=ae({type:l,tooltip:"地板長度",min:3}),k=ae({type:E,tooltip:"Player"}),z=ae({type:C,tooltip:"Menu"}),F=ae({type:s,tooltip:"GameAction"}),A=ae({type:c,tooltip:"地板節點"}),x=ae({type:u,tooltip:"遊戲狀態"}),W=ae({type:p,tooltip:"計時器"}),H=ae({type:C,tooltip:"Game end menu"}),_=ae({type:h,tooltip:"game camera"}),D=ae({type:m,tooltip:"click node"}),R=ae({type:G,tooltip:"遊戲音效模組"}),N((J=t((U=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"floorPrefab",J,o(t)),n(t,"floorLength",j,o(t)),n(t,"player",V,o(t)),n(t,"menu",Z,o(t)),n(t,"gameAnimation",K,o(t)),n(t,"FloorNode",q,o(t)),n(t,"gameStartLabelOpacity",Q,o(t)),n(t,"countTimer",X,o(t)),n(t,"gameEndMenu",Y,o(t)),n(t,"gameCamera",$,o(t)),n(t,"clickNode",ee,o(t)),n(t,"audioComp",te,o(t)),t.gameStateMachine=new I(ie.Idle),t.stPosition=new b(0,0,0),t.endPosition=new b(0,0,0),t.floors=[],t}i(t,e);var a=t.prototype;return a.start=function(){this.floorLength<3&&(this.floorLength=3),this.gameEndMenu.node.active=!1,this.gameCamera.node.active=!1,this.clickNode.setContentSize(g(2*y.getDesignResolutionSize().width,y.getDesignResolutionSize().height))},a.update=function(e){switch(this.gameStateMachine.Trigger(),this.gameStateMachine.Current){case ie.Idle:this.gameStateMachine.isEnter&&this.onGameIdle();break;case ie.Init:this.gameStateMachine.isEnter&&this.onGameInit();break;case ie.Play:this.gameStateMachine.isEnter&&this.onGamePlay();break;case ie.Playing:this.gameStateMachine.isEnter&&this.onGameStart(),(this.player.MoveState==T.Moving||this.player.IsJump)&&this.checkMoveBorder(),this.countTime(),this.checkFloorWithPlayer();break;case ie.End:this.gameStateMachine.isEnter&&this.onGameEnd();break;default:console.error("On Handle game state",this.gameStateMachine.Current)}},a.onGameIdle=function(){var e=this;this.menu.node.parent.active=!0,this.menu.node.active=!0,this.gameEndMenu.node.active=!1,this.gameCamera.node.active=!1,this.player.node.active=!1,this.gameStartLabelOpacity.node.active=!1,this.menu.setGamePlayButtonEvent((function(){e.menu.node.parent.active=!1,e.gameStateMachine.NextState=ie.Init})),this.audioComp.playBgMusic()},a.onGamePlay=function(){var e=this;this.clickNode.node.active=!0,this.player.node.active=!0,this.gameCamera.node.active=!0,this.gameStartLabelOpacity.node.active=!0,this.gameEndMenu.node.active=!1,this.gameAnimation.play(re),this.gameAnimation.once(s.EventType.FINISHED,(function(){e.gameStartLabelOpacity.opacity=255,f(e.gameStartLabelOpacity).to(1.5,{opacity:100}).call((function(){e.gameStartLabelOpacity.node.active=!1,e.gameStateMachine.NextState=ie.Playing,e.audioComp.playGameStartMusic()})).start(),f(e.gameStartLabelOpacity.node).to(1.5,{worldPosition:e.player.node.getWorldPosition()}).start()}))},a.onGameStart=function(){this.player.onGameStart(),this.clickNode.node.on(c.EventType.TOUCH_START,this.player.onMouseDown.bind(this.player)),this.clickNode.node.on(c.EventType.TOUCH_END,this.player.onMouseUp.bind(this.player))},a.onGameOver=function(){this.gameStartLabelOpacity.node.getComponent(p).string=w.GAME_OVER,this.audioComp.playGameOverMusic()},a.onGameWin=function(){this.gameStartLabelOpacity.node.getComponent(p).string=w.WIN+" \n 成績是 "+this.getCountTimeFormat(this.gameStateMachine.Elapsed),this.audioComp.playGameWinnerMusic()},a.onGameEnd=function(){var e=this;this.gameStartLabelOpacity.opacity=255,this.gameAnimation.play(re),f(this.gameStartLabelOpacity.node).to(1,{worldPosition:this.player.node.getWorldPosition()}).call((function(){e.gameEndMenu.node.active=!0,e.gameEndMenu.node.setWorldPosition(e.player.node.worldPosition.x,e.gameEndMenu.node.worldPosition.y,1),e.gameEndMenu.setGamePlayButtonEvent((function(){e.gameStateMachine.NextState=ie.Idle}))})).start(),this.clickNode.node.active=!1,this.clickNode.node.off(c.EventType.TOUCH_START),this.clickNode.node.off(c.EventType.TOUCH_END),this.player.onGameEnd()},a.countTime=function(){this.countTimer.string="Time:"+this.getCountTimeFormat(this.gameStateMachine.Elapsed)},a.PrefixInteger=function(e,t){return(Array(t).join("0")+e).slice(-t)},a.getCountTimeFormat=function(e){return this.PrefixInteger(Math.floor(e/1440),2)+":"+this.PrefixInteger(Math.floor(e/60),2)+":"+this.PrefixInteger(Math.floor(e),2)},a.onGameInit=function(){this.gameStartLabelOpacity.node.getComponent(p).string=w.GAME_START,this.player.onGameInit(),this.generateFloor(),this.gameStateMachine.NextState=ie.Play,this.countTimer.string="Time:"+this.getCountTimeFormat(0)},a.generateFloor=function(){this.FloorNode.removeAllChildren();for(var e=0;e<this.floorLength;e++){var t,i=null!=this.floors[e]?this.floors[e]:this.spawnFloor();if(i)i.node.setPosition(e*i.node.getComponent(m).contentSize.width,0,0),this.FloorNode.addChild(i.node),e<2?(i.isTrap=!1,0==e&&i.node.getWorldPosition(this.stPosition)):e==this.floorLength-1?(i.isTrap=!1,i.isEnd=!0,i.node.getWorldPosition(this.endPosition)):!0===(null===(t=this.floors[e-1])||void 0===t?void 0:t.isTrap)?i.isTrap=!1:i.isTrap=Math.floor(2*Math.random())==S.Trap,this.floors.push(i)}},a.checkFloorWithPlayer=function(){var e=this;this.floors.forEach((function(t){var i=b.distance(e.player.node.worldPosition,t.node.worldPosition);i<e.player.BodySize.width/2&&(t.isTrap&&0==e.player.IsJump&&e.player.onHit(i),(t.isEnd||e.player.HP<=0)&&(e.player.HP<=0&&e.onGameOver(),t.isEnd&&e.onGameWin(),e.gameStateMachine.NextState=ie.End))}))},a.checkMoveBorder=function(){this.player.node.worldPosition.x-this.stPosition.x<0&&this.player.node.setWorldPosition(this.stPosition),this.endPosition.x-this.player.node.worldPosition.x<0&&this.player.node.setWorldPosition(this.endPosition)},a.spawnFloor=function(){if(!this.floorPrefab)return null;var e=P(this.floorPrefab).getComponent(v);return e.isEnd=!1,e},t}(M)).prototype,"floorPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"floorLength",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"player",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"menu",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(U.prototype,"gameAnimation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"FloorNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(U.prototype,"gameStartLabelOpacity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(U.prototype,"countTimer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(U.prototype,"gameEndMenu",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(U.prototype,"gameCamera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(U.prototype,"clickNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(U.prototype,"audioComp",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=U))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Floor.ts","./Jumper.ts","./Player.ts","./Define.ts","./SoundButton.ts","./Menu.ts","./AudioComp.ts","./StateMachine.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});